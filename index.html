<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Knowledge Base Builder</title>
    <!-- Link to External CSS -->
    <link rel="stylesheet" href="styles.css">
    <!-- Google Fonts for Enhanced Typography -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header>
            <h1>Chatbot Knowledge Base Builder</h1>
            <p>Create and manage your chatbot's knowledge base effortlessly.</p>
        </header>
        
        <!-- Instructions Section -->
        <section class="instructions">
            <h2>Getting Started</h2>
            <ol>
                <li>Configure your chatbot settings.</li>
                <li>Enter the website to extract content from.</li>
                <li>Select desired pages from the generated links.</li>
                <li>Add or enhance content for your final prompt.</li>
                <li>Test your prompt in the playground or export it to your preferred platform.</li>
                <li><strong>IMPORTANT</strong>: Save your final prompt in the desired location: Auto-GPT, Default Reply, Assistant, or in a Prompt Template.</li>
            </ol>
        </section>

        <!-- Configuration Section -->
        <section class="configuration">
            <h2>Chatbot Configuration</h2>
            <form id="configForm">
                <div class="form-group">
                    <label for="businessName"><i class="fas fa-building"></i> Business Name</label>
                    <input type="text" id="businessName" placeholder="Enter your business name" required>
                </div>
                <div class="form-group">
                    <label for="businessDetails"><i class="fas fa-info-circle"></i> Business Contact Details</label>
                    <textarea id="businessDetails" rows="3" placeholder="Enter your business contact details" required></textarea>
                </div>
                <div class="form-group">
                    <label for="toneOfVoice"><i class="fas fa-music"></i> Tone of Voice</label>
                    <input type="text" id="toneOfVoice" placeholder="e.g., Professional, Casual" required>
                </div>
                <div class="form-group">
                    <label for="desiredLength"><i class="fas fa-text-width"></i> Target Line Count for Responses</label>
                    <input type="number" id="desiredLength" placeholder="e.g., 50" min="10" max="1000" required>
                </div>
            </form>
        </section>

        <!-- Link Extractor Section -->
        <section class="link-extractor">
            <h2>Site Page Links Extractor</h2>
            <div class="input-group">
                <input type="text" id="domain" placeholder="Enter domain (e.g., example.com or https://example.com)">
                <button class="btn-primary" onclick="fetchSiteLinks()"><i class="fas fa-link"></i> Get Links</button>
            </div>
            <p id="loading"><span class="spinner"></span> Loading...</p>
            <p id="error" class="error-message"></p>
            <div id="linksContainer">
                <button id="selectAllButton" class="btn-secondary" onclick="toggleSelectAll()" style="display:none;"><i class="fas fa-check-square"></i> Select All</button>
                <ul id="linksList"></ul>
            </div>
            <button id="extractButton" class="btn-primary" style="display:none;" onclick="extractSelectedContent()"><i class="fas fa-download"></i> Extract Selected Content</button>
            <div id="progress">
                <div id="progressBar"></div>
                <p id="progressText"></p>
            </div>
        </section>

        <!-- Text Content Section -->
        <section id="textContent" class="text-content"></section>

        <!-- Final Prompt Section -->
        <section id="finalPrompt" class="final-prompt">
            <h2>Final Prompt</h2>
            <textarea id="finalPromptText" rows="10" readonly placeholder="Your final prompt will appear here..."></textarea>
            <div class="button-group">
                <button class="btn-primary" onclick="enhanceFinalPrompt()"><i class="fas fa-edit"></i> Enhance Final Prompt</button>
                <button class="btn-secondary" onclick="copyFinalPrompt()"><i class="fas fa-copy"></i> Copy Final Prompt</button>
            </div>
        </section>

        <!-- Chatbot Playground Section -->
        <section id="playground" class="playground">
            <h2>Chatbot Playground</h2>
            <textarea id="systemPrompt" rows="5" placeholder="Paste your final prompt here. This will act as system instructions."></textarea>
            <div id="controls">
                <div class="control-group">
                    <label for="temperature">Temperature:</label>
                    <input type="number" id="temperature" min="0" max="1" step="0.1" value="0.7">
                </div>
                <div class="control-group">
                    <label for="maxTokens">Max Tokens:</label>
                    <input type="number" id="maxTokens" min="1" max="4096" value="4096">
                </div>
            </div>
            <div id="conversation" class="conversation"></div>
            <textarea id="userInput" rows="3" placeholder="Type your message here..."></textarea>
            <button id="sendMessage" class="btn-primary"><i class="fas fa-paper-plane"></i> Send</button>
        </section>
    </div>

    <!-- Link to External JavaScript -->
    <script src="script.js"></script>
</body>
</html>
